<div style="max-width: 1000px; margin: 0 auto; color: #9ab;">
  
  <%if @query.present? %>
    <div style="display: flex; gap: 20px; border-bottom: 1px solid #2c3440; margin-bottom: 25px; padding-bottom: 10px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase;">
      <%= link_to "Movies", movies_path(query: @query, type: "movies"), 
          style: "text-decoration: none; color: #{@type == 'movies' ? '#fff' : '#678'}; border-bottom: #{@type == 'movies' ? '2px solid #00e054' : 'none'}; padding-bottom: 10px;" %>
      
      <%= link_to "Users", movies_path(query: @query, type: "users"), 
          style: "text-decoration: none; color: #{@type == 'users' ? '#fff' : '#678'}; border-bottom: #{@type == 'users' ? '2px solid #00e054' : 'none'}; padding-bottom: 10px;" %>
      
      <%= link_to "Cast", movies_path(query: @query, type: "cast"), 
          style: "text-decoration: none; color: #{@type == 'cast' ? '#fff' : '#678'}; border-bottom: #{@type == 'cast' ? '2px solid #00e054' : 'none'}; padding-bottom: 10px;" %>
    </div>
  <%end%>

  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 25px;">
    
    <% if @type == "users" %>
      <% @results.each do |user| %>
        <%= link_to user_path(user), style: "text-decoration: none; color: inherit;" do %>
          <div style="background: #1a2129; padding: 20px; border-radius: 8px; text-align: center; border: 1px solid #2c3440; transition: border 0.2s;">
            <div style="width: 70px; height: 70px; background: #2c3440; border-radius: 50%; margin: 0 auto 15px; border: 2px solid #fff;"></div>
            <strong style="color: #fff; display: block;"><%= user.name %></strong>
            <small style="color: #678;">View Profile</small>
          </div>
        <% end %>
      <% end %>

    <% elsif @type == "cast" %>
      <% @results.each do |person| %>
        <%= link_to cast_path(person), style: "text-decoration: none; color: inherit;" do %>
          <div style="text-align: center; background: #1a2129; padding: 15px; border-radius: 8px; border: 1px solid #2c3440;">
            <div style="width: 80px; height: 80px; background: #2c3440; border-radius: 50%; margin: 0 auto 10px; border: 1px solid #456; overflow: hidden;">
              <%= image_tag person.pic, style: "width: 100%; height: 100%; object-fit: cover;" if person.pic.present? %>
            </div>
            <strong style="color: #fff; display: block; font-size: 0.9rem;"><%= person.name %></strong>
          </div>
        <% end %>
      <% end %>

    <% else %>
      <% @results.each do |movie| %>
        <div style="display: flex; flex-direction: column;">
          <%= link_to movie_path(movie), style: "text-decoration: none; color: inherit;" do %>
            <div style="aspect-ratio: 2/3; overflow: hidden; border-radius: 4px; border: 1px solid #2c3440;">
              <% if movie.poster_url.present? %>
                <%= image_tag movie.poster_url, style: "width: 100%; height: 100%; object-fit: cover" %>
              <% else %>
                <div style="width: 100%; height: 100%; background: #2c3440; display: flex; align-items: center; justify-content: center;">No Poster</div>
              <% end %>
            </div>
            <h3 style="color: #fff; font-size: 0.95rem; margin-top: 10px; font-weight: normal;"><%= movie.title %></h3>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>

  <% if @results.empty? %>
    <p style="text-align: center; color: #678; margin-top: 50px;">No results found for "<%= @query %>" in <%= @type %>.</p>
  <% end %>
</div>