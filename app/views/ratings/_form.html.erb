<% user = User.first %>
<% current_rating = user.ratings.find_by(movie: movie)&.rating %>

<div style="display: flex; align-items: center; font-family: sans-serif; white-space: nowrap;">
  <span style="margin-right: 12px; color: #9ab; font-size: 0.7rem; letter-spacing: 1px;">RATE</span>

   
  <%= form_with url: movie_ratings_path(movie), method: :post, local: true, 
                class: "star-rating-form",
                style: "display: flex; flex-direction: row-reverse; justify-content: flex-end; align-items: center;" do |f| %>
    
    <style>
      .star-rating-form {
        direction: rtl; /* Sets the base direction to right-to-left */
      }
      
      .star-radio { display: none; }

      .star-label { 
        font-size: 32px; 
        color: #2c3440; 
        cursor: pointer; 
        transition: color 0.1s;
        display: inline-block;
      }
      
      .star-radio:checked ~ .star-label { 
        color: #00e054; 
      }
      
      .star-label:hover, 
      .star-label:hover ~ .star-label { 
        color: #00e054 !important;
      }
    </style>
    
    <% 5.downto(1) do |i| %>
      <input type="radio" 
             name="rating" 
             id="star<%= i %>" 
             value="<%= i %>" 
             class="star-radio" 
             onchange="this.form.submit()" 
             <%= "checked" if current_rating == i %> />
      <label for="star<%= i %>" class="star-label">â˜…</label>
    <% end %>
  <% end %>
</div>